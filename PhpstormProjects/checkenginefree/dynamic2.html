<!DOCTYPE html>
<html>
<head>

    <style>
        #map-canvas { width:500px; height:400px; }
        .layer-wizard-search-label { font-family: sans-serif }
    </style>
    <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?sensor=true">
    </script>
    <script type="text/javascript">
        src="scripty.js"
    </script>
    <script type="text/javascript">

        navigator.geolocation.getCurrentPosition(function(position) {
            geolocate = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            map.setCenter(geolocate);
        });
        var map;
        var layer_0;
        function initialize() {


            map = new google.maps.Map(document.getElementById('map-canvas'), {

               // center: new google.maps.LatLng(47.65004548076222, -121.45378206237541),
                zoom: 12

                //mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            var fenway = new google.maps.LatLng();
            var panoramaOptions = {
                position: fenway,
                pov: {
                    heading: 34,
                    pitch: 10
                }
            };
            var panorama = new  google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);
            map.setStreetView(panorama);



            var style = [
                {
                    featureType: 'all',
                    elementType: 'all',
                    stylers: [
                        { saturation: -38 }
                    ]
                }
            ];
            var styledMapType = new google.maps.StyledMapType(style, {
                map: map,
                name: 'Styled Map'
            });
            map.mapTypes.set('map-style', styledMapType);
            map.setMapTypeId('map-style');
            layer_0 = new google.maps.FusionTablesLayer({
                query: {
                    select: "col0",
                    from: "1h_dxq_8XtHVeAzcms8NGuk3-ycarToxVzHz2e49L"
                },
                map: map,
                styleId: 2,
                templateId: 2
            });





            //



        }


        function changeMap_0() {
            var whereClause;
            var searchString = document.getElementById('search-string_0').value.replace(/'/g, "\\'");
            if (searchString != '--Select--') {
                whereClause = "'Locality' CONTAINS IGNORING CASE '" + searchString + "'";
            }
            layer_0.setOptions({
                query: {
                    select: "col0",
                    from: "1h_dxq_8XtHVeAzcms8NGuk3-ycarToxVzHz2e49L",
                    where: whereClause
                }
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);


    </script>
    <script>

//        var marker = new google.maps.Marker({
//            position: geolocate,
//            map: map,
//            title: 'Click to zoom'
//        });
//
//        google.maps.event.addListener(marker,'click',function() {
//            map.setZoom(9);
//            map.setCenter(marker.getPosition());
//        });


    </script>
    <link rel="stylesheet" href="storelocator.css">
</head>
<body>
<div id="map-canvas"></div>
<div style="margin-top: 10px;">
    <label class="layer-wizard-search-label">
        Where are you?
        <input type="text" id="search-string_0">
        <input type="button" onclick="changeMap_0()" value="Search">

    </label>
</div>
<iframe width="500" height="300" scrolling="yes" frameborder="no" src="http://www.google.com/fusiontables/embedviz?viz=GVIZ&amp;t=TABLE&amp;q=select+col0%2C+col1%2C+col2%2C+col3%2C+col4%2C+col5+from+1h_dxq_8XtHVeAzcms8NGuk3-ycarToxVzHz2e49L&amp;containerId=googft-gviz-canvas"></iframe>
<div id="map_frame">
<div id="list" style="width: 88%; height: 400px; margin-left:auto;margin-right:auto;"></div>
    </div>
    <div id="pano" style="width: 88%; height: 400px; margin-left:auto;margin-right:auto;"></div>
<div id="testynester"></div>

</body>
</html>

